var lotameIsCompatible = function() { return ( typeof Object.keys !== 'undefined' && typeof window.postMessage !== 'undefined' && typeof XMLHttpRequest !== 'undefined' && typeof(new XMLHttpRequest().withCredentials) !== 'undefined' && typeof console !== 'undefined' && typeof console.log !== 'undefined' && typeof document.createElement !== 'undefined' ); }; if(!lotameIsCompatible()){ if(console && console.error){ console.error('Lotame: This browser does not meet the minimum requirements.'); } } else { function lt16590_aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function lt16590_a(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:lt16590_aa(a)}}var lt16590_ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},lt16590_b; if("function"==typeof Object.setPrototypeOf)lt16590_b=Object.setPrototypeOf;else{var lt16590_c;a:{var lt16590_ca={Gb:!0},lt16590_da={};try{lt16590_da.__proto__=lt16590_ca;lt16590_c=lt16590_da.Gb;break a}catch(a){}lt16590_c=!1}lt16590_b=lt16590_c?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var lt16590_ea=lt16590_b; function lt16590_d(a,b){a.prototype=lt16590_ba(b.prototype);a.prototype.constructor=a;if(lt16590_ea)lt16590_ea(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.gc=b.prototype} var lt16590_e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,lt16590_fa="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a},lt16590_ga="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)}; function lt16590_f(a,b){if(b){var c=lt16590_e;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&lt16590_ga(c,a,{configurable:!0,writable:!0,value:b})}}lt16590_f("Object.assign",function(a){return a||lt16590_fa});lt16590_f("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}}); lt16590_f("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var g=d[c];if(g===b||Object.is(g,b))return!0}return!1}}); lt16590_f("String.prototype.includes",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(b,c||0)}});lt16590_f("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}}); lt16590_f("Array.prototype.find",function(a){return a?a:function(b,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,g=0;g<e;g++){var f=d[g];if(b.call(c,f,g,d)){b=f;break a}}b=void 0}return b}}); lt16590_f("Promise",function(a){function b(f){this.ba=0;this.Wa=void 0;this.P=[];var h=this.Ia();try{f(h.resolve,h.reject)}catch(k){h.reject(k)}}function c(){this.F=null}function d(f){return f instanceof b?f:new b(function(h){h(f)})}if(a)return a;c.prototype.hb=function(f){if(null==this.F){this.F=[];var h=this;this.ib(function(){h.Pb()})}this.F.push(f)};var e=lt16590_e.setTimeout;c.prototype.ib=function(f){e(f,0)};c.prototype.Pb=function(){for(;this.F&&this.F.length;){var f=this.F;this.F=[];for(var h= 0;h<f.length;++h){var k=f[h];f[h]=null;try{k()}catch(l){this.Hb(l)}}}this.F=null};c.prototype.Hb=function(f){this.ib(function(){throw f;})};b.prototype.Ia=function(){function f(l){return function(m){k||(k=!0,l.call(h,m))}}var h=this,k=!1;return{resolve:f(this.ac),reject:f(this.Va)}};b.prototype.ac=function(f){if(f===this)this.Va(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof b)this.bc(f);else{a:switch(typeof f){case "object":var h=null!=f;break a;case "function":h=!0;break a; default:h=!1}h?this.$b(f):this.qb(f)}};b.prototype.$b=function(f){var h=void 0;try{h=f.then}catch(k){this.Va(k);return}"function"==typeof h?this.cc(h,f):this.qb(f)};b.prototype.Va=function(f){this.Bb(2,f)};b.prototype.qb=function(f){this.Bb(1,f)};b.prototype.Bb=function(f,h){if(0!=this.ba)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.ba);this.ba=f;this.Wa=h;this.Qb()};b.prototype.Qb=function(){if(null!=this.P){for(var f=0;f<this.P.length;++f)g.hb(this.P[f]);this.P= null}};var g=new c;b.prototype.bc=function(f){var h=this.Ia();f.la(h.resolve,h.reject)};b.prototype.cc=function(f,h){var k=this.Ia();try{f.call(h,k.resolve,k.reject)}catch(l){k.reject(l)}};b.prototype.then=function(f,h){function k(n,p){return"function"==typeof n?function(q){try{l(n(q))}catch(r){m(r)}}:p}var l,m,t=new b(function(n,p){l=n;m=p});this.la(k(f,l),k(h,m));return t};b.prototype.catch=function(f){return this.then(void 0,f)};b.prototype.la=function(f,h){function k(){switch(l.ba){case 1:f(l.Wa); break;case 2:h(l.Wa);break;default:throw Error("Unexpected state: "+l.ba);}}var l=this;null==this.P?g.hb(k):this.P.push(k)};b.resolve=d;b.reject=function(f){return new b(function(h,k){k(f)})};b.race=function(f){return new b(function(h,k){for(var l=lt16590_a(f),m=l.next();!m.done;m=l.next())d(m.value).la(h,k)})};b.all=function(f){var h=lt16590_a(f),k=h.next();return k.done?d([]):new b(function(l,m){function t(q){return function(r){n[q]=r;p--;0==p&&l(n)}}var n=[],p=0;do n.push(void 0),p++,d(k.value).la(t(n.length- 1),m),k=h.next();while(!k.done)})};return b});function lt16590_g(){this.Ja=-1!==window.location.href.indexOf("lotameDebug\x3dtrue");this.name="LT.JS"}function lt16590_h(a,b){return a.name+": "+b}lt16590_g.prototype.debug=function(a,b){this.Ja&&a&&"undefined"!==typeof console&&"undefined"!==typeof console.log&&(b?console.log(lt16590_h(this,a),b):console.log(lt16590_h(this,a)))}; lt16590_g.prototype.error=function(a,b){a&&"undefined"!==typeof console&&"undefined"!==typeof console.error&&(null!=b?console.error(lt16590_h(this,a),b):console.error(lt16590_h(this,a)))};var lt16590_=new lt16590_g;function lt16590_i(){this.va=23328E3}lt16590_i.prototype.I=function(a,b,c,d){d=void 0===d?this.va:d;document.cookie=a+"\x3d"+b+"; Domain\x3d"+c+"; path\x3d/; SameSite\x3dLax; expires\x3d"+(new Date(Date.now()+1E3*d)).toUTCString()};lt16590_i.prototype.H=function(a){var b=null,c=""+document.cookie;0!==c.length&&(a=c.match(a+"\x3d([^;]*)"),"undefined"!==typeof a&&null!==a&&(b=a[1]));return b};function lt16590_j(a,b,c){a=void 0===a?{}:a;b=void 0===b?{}:b;this.a=Object.assign({},{bcpClient:16590,audienceExtractionEnabled:!0,consentClientIds:[16582,16590],panoramaIdEnabled:!1,enableAudienceMatching:!0,usPrivacyEnabled:!1,googleEspEnabled:!1,enableDeclaredIds:!1,enableDeclaredIdsOnEvents:!1,namespace:window[(void 0===c?"lotame_":c)+"16590"],cookieDomain:lt16590_ha(String(document.domain).toLowerCase()),protocol:"https",tagsDomain:"tags.crwdcntrl.net",privacyDomain:"privacy.crwdcntrl.net", firstPartyOnlyDomain:"ltmsphrcl.net",firstPartyOnlyCollectionPrefix:"c",bcpVersion:"6",sharedS3Path:"lt/shared/2",cookieNames:["_cc_id","_cc_aud","_cc_cc"],profileIdCookieName:"_cc_id",panoramaIdName:"panoramaId",declaredIdName:"lotame_16590_did",cmpWaitMillis:250,sensitivePrefix:"st"},a);a=this.a.namespace;if(!a)throw"Configuration Error! Please verify that your code and configuration match the specs and check for syntax errors in the console.";b=Object.assign({},{onProfileReady:null,bcpPrefix:"bcp"}, b);this.Kb=lt16590_ia(a,b);Object.assign(this.a,this.Kb);this.a.iframeOrigin=this.a.protocol+"://tags.crwdcntrl.net";this.a.bcpDomain=this.a.bcpPrefix+".crwdcntrl.net";this.a.sensitiveDomain=this.a.bcpPrefix+"."+this.a.sensitivePrefix+".crwdcntrl.net";this.a.bcpFirstPartyOnlyDomain=this.a.firstPartyOnlyCollectionPrefix+".ltmsphrcl.net";this.a.sensitiveFirstPartyOnlyDomain=this.a.firstPartyOnlyCollectionPrefix+"."+this.a.sensitivePrefix+".ltmsphrcl.net";this.a.privacyFirstPartyOnlyDomain=this.a.firstPartyOnlyCollectionPrefix+ ".ltmsphrcl.net"}function lt16590_k(a){return!(!a.a.audienceExtractionEnabled||!a.a.enableAudienceMatching||null===a.a.onProfileReady&&!1===a.a.audienceLocalStorage)} function lt16590_ia(a,b){var c={},d=Object.keys(b),e=a.config;e&&(Object.keys(e).filter(function(g){return!d.includes(g)}).forEach(function(g){return lt16590_.error("'"+g+"' is an unsupported config option.")}),c=Object.keys(e).filter(function(g){return d.includes(g)}).reduce(function(g,f){switch(f){case "audienceLocalStorage":"boolean"===typeof e[f]?g[f]=e[f]?"lotame_16590_auds":!1:"string"===typeof e[f]?g[f]=e[f]:lt16590_.error("The audienceLocalStorage config option is being ignored as it is neither a boolean nor a string. The default value of false will be used instead."); break;case "onTagReady":"function"!==typeof e[f]?lt16590_.error("The onTagReady config option is being ignored as it is not a function."):g[f]=e[f];break;case "onProfileReady":"function"!==typeof e[f]?lt16590_.error("The onProfileReady config option is being ignored as it is not a function."):g[f]=e[f];break;case "autoRun":"boolean"!==typeof e[f]?lt16590_.error("The autoRun config option is being ignored as it is not a boolean. The default value of true will be used instead."):g[f]=e[f];break;case "bcpPrefix":-1=== ["bcp","cn"].indexOf(e[f])?lt16590_.error("The bcpPrefix config option is being ignored as it is not valid. The default value of bcp will be used instead."):g[f]=e[f];break;case "clientId":lt16590_.debug("The clientId config option is not needed anymore");break;default:lt16590_.error("'"+f+"' is an unsupported config option.")}return g},{}));return Object.assign({},b,c)} function lt16590_ha(a){var b=new lt16590_i,c=a.split(".");if(2==c.length)return a;var d=-2;do{var e=a=c.slice(d).join(".");b.I("lotame_domain_check",e,a,10);b.H("lotame_domain_check")===e?e=!1:(d+=-1,e=Math.abs(d)<=c.length)}while(e);return a}function lt16590_l(a){return a.a.cookieDomain?!1:!0}function lt16590_m(a){return a.a.cookieDomain?!0:!1}lt16590_j.prototype.j=function(){return JSON.parse(JSON.stringify(this.a))};function lt16590_ja(){lt16590_j.call(this,{hasPageLoadOptimusRules:!0,collectPrebidData:!1,googleCampaignEvents:[],whitelistRequired:!0,firstImpressionRules:[],bcpEnabled:"true",cookieHandlingScheme:"DOMAIN_WHITELIST_REQUIRED"},{onTagReady:null,autoRun:!0,audienceLocalStorage:!1,clientId:null});this.Eb="DOMAIN_WHITELIST_DISABLED";var a=this.a;var b=String(document.domain).toLowerCase();var c=null,d=this.a.whitelistRequired;if(this.a.cookieHandlingScheme===this.Eb)b=lt16590_ha(b);else{var e="jamaica.moonpalace.com www.moonpalacecancun.com bookingscancunpr.leblancsparesorts.com paquetes.moonpalace.com sun.palaceresorts.com onlinebookingspr.palaceresorts.com meetings.palaceresorts.com palaceelite.com bookingsbeachpr.palaceresorts.com thegrand.moonpalace.com onlinebookingspr.leblancsparesorts.com cozumel.palaceresorts.com playacar.palaceresorts.com los-cabos.leblancsparesorts.com bookingsthegrandpr.moonpalace.com www.reservhotel.com www.leblancsparesorts.com cancun.leblancsparesorts.com bookingsplayadelcarmenpr.palaceresorts.com bookingscabopr.leblancsparesorts.com www.palaceresorts.com onlinebookingspr.moonpalace.com bookingscancunpr.moonpalace.com bookingssunpr.palaceresorts.com weddings.palaceresorts.com bookingscozumelpr.palaceresorts.com paquetes.leblancsparesorts.com bookingsjamaicapr.moonpalace.com bookingsnizucpr.moonpalace.com beach.palaceresorts.com paquetes.palaceresorts.com www.moonpalace.com".split(" "), g=[];if(d&&0===e.length)throw"Client "+this.a.bcpClient+" cannot run lt.min.js because it has no domains whitelisted.";var f=b;do{if(e.includes(f)||g.includes(f)){c=f;break}var h=f.indexOf(".");f=f.substring(h+1)}while(-1!=h);if(d&&null==c)throw"Client "+this.a.bcpClient+" cannot run lt.min.js because neither the domain "+b+" nor any of its sub domains have been properly whitelisted";b=c}a.cookieDomain=b;if("true"!==this.a.bcpEnabled)throw"The lt.min.js file cannot run because client "+this.a.bcpClient+ " is not permitted to call Lotame's servers.";}lt16590_d(lt16590_ja,lt16590_j);function lt16590_n(a){a=void 0===a?{}:a;this.D=null;if(a=a.thirdParty){var b=!0;"object"!=typeof a&&(b=!1,lt16590_.error("tagInput.data.thirdParty should be an object"));a.namespace||(b=!1,lt16590_.error("tagInput.data.thirdParty.namespace is not defined"));a.value||(b=!1,lt16590_.error("tagInput.data.thirdParty.value is not defined"));a.namespace&&"string"!=typeof a.namespace&&(b=!1,lt16590_.error("tagInput.data.thirdParty.namespace should be defined and have a string as its value"));a.value&&"string"!= typeof a.value&&(b=!1,lt16590_.error("tagInput.data.thirdParty.value should be defined and have a string as its value"));b&&(this.D={},this.D[a.namespace]=a.value)}}function lt16590_o(a){return!!(a.D&&0<Object.keys(a.D).length)}function lt16590_p(a){var b=null;if(a.D){b={};var c=Object.keys(a.D);b.namespace=c[0];b.value=a.D[c[0]]}return b}lt16590_n.prototype.pa=function(){return{tp:lt16590_o(this)?this.D:void 0}};lt16590_n.prototype.B=function(){return!lt16590_o(this)}; lt16590_n.prototype.j=function(){return{hc:lt16590_o(this)?lt16590_p(this):void 0}};function lt16590_q(a){this.ea=[];if(a&&Array.isArray(a))for(var b=0;b<a.length;b++){var c=a[b];this.ea.includes(c)||this.ea.push(c)}};var lt16590_ka=new RegExp(/^.{1,64}@.{1,255}$/),lt16590_la=["EMAIL","EE"]; function lt16590_r(a){a=void 0===a?{}:a;lt16590_n.call(this,a);this.g=this.u=this.o=this.l=null;lt16590_ma(this,a.behaviorIds);lt16590_na(this,a.behaviors);lt16590_oa(this,a.ruleBuilder);a=a.declaredId;var b;if(b=a)b=!1,a&&lt16590_s(a)?"undefined"===typeof a.id||"undefined"===typeof a.type?lt16590_.error("Declared ID object must contain both 'id' and 'type' attributes."):2<Object.keys(a).length?lt16590_.error("Declared ID object may only contain 'id' and 'type' attributes, got "+Object.keys(a).join(",")): lt16590_la.includes(a.type)?"EMAIL"!=a.type||lt16590_ka.test(a.id)?b=!0:lt16590_.error("In declared ID, supplied id must be valid email address, was '"+a.id+"'"):lt16590_.error("Declared ID object type must one of "+lt16590_la.join()+", found '"+a.type+"'"):lt16590_.error("Declared ID should be an object");b&&(this.g=a)}lt16590_d(lt16590_r,lt16590_n); function lt16590_pa(a,b){b=void 0===b?new lt16590_r:b;var c={};c.behaviorIds=(new lt16590_q((a.l||[]).concat(b.l||[]))).ea;c.thirdParty=lt16590_s(b.D)?lt16590_p(b):lt16590_p(a);var d=Object.assign({},a.o,b.o);c.behaviors={};Object.keys(d).forEach(function(e){c.behaviors[e]=(new lt16590_q((this.o?this.o[e]||[]:[]).concat(b.o?b.o[e]||[]:[]))).ea},a);d=Object.assign({},a.u,b.u);c.ruleBuilder={};Object.keys(d).forEach(function(e){c.ruleBuilder[e]=(new lt16590_q((this.u?this.u[e]||[]:[]).concat(b.u?b.u[e]|| []:[]))).ea},a);c.declaredId=lt16590_s(b.g)?b.g:a.g;return new lt16590_r(c)}function lt16590_ma(a,b){b&&(Array.isArray(b)&&b.every(function(c){return"number"===typeof c})?a.l=b:lt16590_.error("tagInput.data.behaviorIds should be an array of numbers"))} function lt16590_na(a,b){if(b){var c=!0;"object"!=typeof b&&lt16590_.error("tagInput.data.behaviors should be an object");for(var d=lt16590_a(Object.entries(b)),e=d.next();!e.done;e=d.next()){var g=lt16590_a(e.value);e=g.next().value;g=g.next().value;if(!Array.isArray(g)||!g.every(function(f){return"string"===typeof f})){lt16590_.error("tagInput.data.behaviors."+e+" should be an array of strings");c=!1;break}}c&&(a.o=b)}}function lt16590_t(a){return!!(a.o&&0<Object.keys(a.o).length)} function lt16590_oa(a,b){if(b){for(var c=!0,d=lt16590_a(Object.entries(b)),e=d.next();!e.done;e=d.next()){var g=lt16590_a(e.value);e=g.next().value;g=g.next().value;if(!Array.isArray(g)||!g.every(function(f){return"string"===typeof f})){lt16590_.error("tagInput.data.ruleBuilder."+e+" should be an array of strings");c=!1;break}}c&&(a.u=b)}}function lt16590_u(a){return!!(a.u&&0<Object.keys(a.u).length)}function lt16590_v(a){return!!(a.g&&0<Object.keys(a.g).length)} lt16590_r.prototype.pa=function(){return Object.assign({},{b:this.l&&0<this.l.length?this.l:void 0,bt:lt16590_t(this)?this.o:void 0,db:lt16590_u(this)?this.u:void 0,did:lt16590_v(this)?this.g:void 0},lt16590_n.prototype.pa.call(this))};lt16590_r.prototype.B=function(){return!(this.l&&0<this.l.length)&&!lt16590_t(this)&&!lt16590_u(this)&&!lt16590_v(this)&&lt16590_n.prototype.B.call(this)}; lt16590_r.prototype.j=function(){return Object.assign({},{behaviorIds:this.l&&0<this.l.length?this.l:void 0,behaviors:lt16590_t(this)?this.o:void 0,ruleBuilder:lt16590_u(this)?this.u:void 0,declaredId:lt16590_v(this)?this.g:void 0},lt16590_n.prototype.j.call(this))};function lt16590_w(a,b,c){document.addEventListener?a.addEventListener(b,c,!1):document.attachEvent&&a.attachEvent("on"+b,c)}function lt16590_x(a,b,c){document.removeEventListener?a.removeEventListener(b,c,!1):document.detachEvent&&a.detachEvent("on"+b,c)}function lt16590_s(a){return"[object Object]"===Object.prototype.toString.call(a)}function lt16590_y(a){return 0===Object.keys(a).length&&a.constructor===Object} function lt16590_z(a,b,c){c=void 0===c?!0:c;b=b||{};var d=Object.assign({method:"GET",ca:lt16590_A,error:lt16590_A,complete:lt16590_A},b),e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var g={};if(200==e.status){var f={};try{f=JSON.parse(e.response)}catch(h){lt16590_.error("Could not parse the following response from Lotame's servers: "+e.response)}d.ca(f,e.statusText,g);d.complete(f,e.statusText,g)}else d.error(g,e.statusText,e.response),d.complete(g,e.statusText,e.response)}}; b="undefined"===typeof d.data?"":JSON.stringify(d.data);e.open(d.method,a,!0);e.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");c&&(e.withCredentials=!0);e.send(b)}function lt16590_qa(){return!(!navigator.userAgent||-1==navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Chrome"))}function lt16590_A(){}function lt16590_B(){this.s=[]}lt16590_B.prototype.enqueue=function(a){this.s.push(a)};function lt16590_ra(a){if(0!=a.s.length)return a.s.shift()} lt16590_B.prototype.B=function(){return 0===this.s.length};function lt16590_C(){this.W=new lt16590_B}lt16590_C.prototype.enqueue=function(a){lt16590_s(a)&&this.W.enqueue(new lt16590_r(a))};function lt16590_D(a){var b=lt16590_ra(a.W);if(b)for(;!a.W.B();)b=lt16590_pa(b,lt16590_ra(a.W));return b}lt16590_C.prototype.B=function(){return this.W.B()};function lt16590_sa(a){this.ja=this.G=this.ka=!1;this.ya="unknown";this.h=new lt16590_C;this.ha=!1;this.K=a}lt16590_sa.prototype.j=function(){return JSON.parse(JSON.stringify({running:this.ka,runRequested:this.G,pageLoaded:this.ja,dataCollectionEnvironment:this.ya,internalDataQueue:this.h,internalDataQueueBeingProcessed:this.ha,dataCollectionOnlyUseCase:this.K}))};function lt16590_E(a){this.f=a;this.ob=new lt16590_i;this.Sa=this.f.a.profileIdCookieName;try{var b=window.localStorage;b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");var c=!0}catch(d){c=d instanceof DOMException&&(22===d.code||1014===d.code||"QuotaExceededError"===d.name||"NS_ERROR_DOM_QUOTA_REACHED"===d.name)&&b&&0!==b.length}this.Na=c;this.dc=this.f.a.cookieNames;this.va=23328E3;this.ua="_exp"}function lt16590_F(a){return lt16590_G(a,a.Sa)} function lt16590_G(a,b){var c=a.H(b);c||(c=lt16590_H(a,b));return c}function lt16590_ta(a,b,c,d){a.I(b,c,void 0===d?a.va:Math.ceil((d-(new Date).getTime())/1E3));lt16590_I(a,b,c,d)}lt16590_E.prototype.I=function(a,b,c){this.ob.I(a,b,this.f.a.cookieDomain,c)};function lt16590_I(a,b,c,d){a.Na&&(window.localStorage.setItem(b,c||""),void 0!==d&&window.localStorage.setItem(b+a.ua,String(d)))}function lt16590_J(a,b){a.Na&&(window.localStorage.removeItem(b),window.localStorage.removeItem(b+a.ua))} lt16590_E.prototype.H=function(a){return this.ob.H(a)};function lt16590_H(a,b){return a.Na&&(a=window.localStorage.getItem(b+a.ua),!a||""===a||(new Date(a)).getTime()>Date.now())?window.localStorage.getItem(b):null}function lt16590_ua(a,b){b&&b.forEach(function(c){var d=c.k,e=c.v;c=c.e;a.I(d,e,c);0<c?lt16590_I(a,d,e):lt16590_J(a,d)})}lt16590_E.prototype.N=function(){var a=this,b=[];a.dc.forEach(function(c){var d=lt16590_G(a,c);d&&b.push({k:c,v:d})});return b}; lt16590_E.prototype.O=function(){return this.f.a.panoramaIdEnabled?lt16590_G(this,this.f.a.panoramaIdName):null};function lt16590_K(a,b){this.f=a;this.storage=b;this.lb=250;this.ra=0}lt16590_K.prototype.S=function(){console.error("Class extending BaseConsentHandler must implement pollForConsent()")};lt16590_e.Object.defineProperties(lt16590_K,{Ya:{configurable:!0,enumerable:!0,get:function(){return 60}}});function lt16590_L(a){"object"!==typeof a&&(a={});this.ma=a.consent;this.error=a.error;this.R=a.pid}function lt16590_va(a,b){if(!1!==(a.ma&&0<a.ma.length))return a.ma.find(function(c){return c.clientid==b})}function lt16590_wa(a,b){if(b=lt16590_va(a,b))return{consent:[b],profileId:a.R?a.R:null}}function lt16590_M(a,b){return(a=lt16590_va(a,b))&&a.types&&0<a.types.length?a.types:[]}lt16590_L.prototype.toString=function(){return JSON.stringify({consent:this.ma,error:this.error,pid:this.R})};function lt16590_xa(a){a=a||{};this.profile=new lt16590_L(a.Profile)};function lt16590_ya(a,b){this.f=a;this.storage=b;this.Ha={analytics:"ca",datasharing:"cds",targeting:"cta",crossdevice:"ccd"};this.Sb="fp";this.Jb="c";this.Mb="ct";this.Nb="skip";this.jb={};lt16590_m(this.f)&&(this.jb[this.Mb]=this.Nb);this.nb=this.f.a.consentClientIds;this.kb=this.f.a.protocol+"://"+(lt16590_qa()?this.f.a.privacyFirstPartyOnlyDomain:this.f.a.privacyDomain)+"/consent"} function lt16590_za(a,b,c){if("function"!==typeof b)throw lt16590_h(lt16590_,"First argument to getConsent must be a callback function but was "+b);if("number"===typeof c){if(!a.nb.includes(c))throw lt16590_h(lt16590_,"Client "+a.f.a.bcpClient+" cannot get consent for client "+c);}else throw lt16590_h(lt16590_,"Second argument to getConsent must be a Lotame client id but was "+c);var d=lt16590_F(a.storage);d=lt16590_Aa(a,a.kb+"/get",c,d);lt16590_z(d,{method:"GET",ca:function(e){return lt16590_Ba(a, e,b,c,!1)},error:function(e,g){b(lt16590_Ca(g))}})} function lt16590_Da(a,b,c,d){if("function"!==typeof b)throw lt16590_h(lt16590_,"First argument to setConsent must be a callback function");if("number"===typeof c){if(!a.nb.includes(c))throw lt16590_h(lt16590_,"Client "+a.f.a.bcpClient+" cannot set consent for client "+c);}else throw lt16590_h(lt16590_,"Second argument to setConsent must be a Lotame client id but was "+c);lt16590_Ea(a,d);var e=lt16590_F(a.storage),g=lt16590_H(a.storage,"lotame_"+c+"_consent");try{var f=JSON.parse(g||"{}")}catch(h){lt16590_.debug("Error parsing consent from local storage: "+ g)}g=new lt16590_L(f);lt16590_Fa(a,g,e,d,c)?b(lt16590_wa(g,c)):(d=lt16590_Aa(a,a.kb+"/set",c,e,lt16590_Ga(a,d)),lt16590_z(d,{method:"GET",ca:function(h){return lt16590_Ba(a,h,b,c,!0)},error:function(h,k){b(lt16590_Ca(k))}}))}function lt16590_Aa(a,b,c,d,e){d=void 0===d?null:d;e=void 0===e?{}:e;e=Object.assign({},a.jb,e);e[a.Jb]=c;d&&(e[a.Sb]=d);a=b;if("undefined"!==typeof e){b=!1;for(var g in e)b?a+="\x26":(a+="?",b=!0),a+=g+"\x3d"+encodeURIComponent(""+e[g])}return a} function lt16590_Ba(a,b,c,d,e){b=(new lt16590_xa(b)).profile;var g="lotame_"+d+"_consent";if((void 0===e?0:e)&&b.R&&lt16590_m(a.f)){e=a.storage;var f=b.R;e.I(e.Sa,f);lt16590_I(e,e.Sa,f)}b.error?(c({error:b.error}),lt16590_J(a.storage,g)):(0<lt16590_M(b,d).length&&lt16590_m(a.f)&&lt16590_I(a.storage,g,b.toString()),c(lt16590_wa(b,d)))}function lt16590_Ca(a){return{error:"500",message:"Call to Lotame's servers failed"+(a?" with the following message: "+a:"")}} function lt16590_Ea(a,b){var c=Object.keys(a.Ha);if(!b||!lt16590_s(b)||0===Object.keys(b).length){var d={};c.forEach(function(e){d[e]=!0});throw"Must provide a consent object like: "+JSON.stringify(d);}Object.keys(b).forEach(function(e){if(!this.Ha[e])throw lt16590_h(lt16590_,"Consent attribute '"+e+"' is not in valid keys "+c);if("boolean"!==typeof b[e])throw lt16590_h(lt16590_,"Consent attribute '"+e+"' must have the boolean value of true or false");},a)} function lt16590_Ga(a,b){var c={};Object.keys(b).forEach(function(d){c[this.Ha[d]]=b[d]?1:0},a);return c}function lt16590_Fa(a,b,c,d,e){if(!c||b.R!==c||Object.keys(d).length!==lt16590_M(b,e).length)return!1;var g=!0;lt16590_M(b,e).forEach(function(f){d[f.name]!==f.consent&&(g=!1)},a);return g?!0:!1};function lt16590_N(a,b){a=a||{};this.f=b||{};this.ga=this.J=this.L=this.ab=this.fb=this.Ca=this.Aa=this.wa=null;if(b=a.aud)Array.isArray(b)?this.wa=b:lt16590_.error("profileData.audienceIds should be an array");if(b=a.pid)"string"!==typeof b?lt16590_.error("if defined, profileData.profileId should be a string"):this.Aa=b;if(b=a.tc)Array.isArray(b)?this.Ca=b:lt16590_.error("profileData.targetingCodes should be an array");if(b=a.spx)Array.isArray(b)?this.fb=b:lt16590_.error("profileData.syncPixels should be an array"); if(b=a.e)Array.isArray(b)?(this.L=b,Array.isArray(b)&&b.forEach(this.Fb)):lt16590_.error("profileData.errorCodes should be an array");if(b=a.exb)Array.isArray(b)?this.ab=b:lt16590_.error("profileData.exportBeaconIds should be an array");lt16590_Ha(this,a.c);lt16590_Ia(this,a.ids)} function lt16590_Ha(a,b){if(b)if(Array.isArray(b)){var c=[];b.forEach(function(d){var e=!0,g=d.k,f=d.v,h=d.e;"string"!==typeof g&&(lt16590_.error("profileData.cookies key attribute should be a string but was "+g),e=!1);"string"!==typeof f&&(lt16590_.error("profileData.cookies value attribute should be a string but was "+f),e=!1);"number"!==typeof h&&(lt16590_.error("profileData.cookies expiration attribute should be a number but was "+h),e=!1);e&&c.push(d)});a.J=c}else lt16590_.error("profileData.cookies ("+ b+") should be an array")} function lt16590_Ia(a,b){if(b)if(Array.isArray(b)){var c=[];b.forEach(function(d){var e=!0,g=d.c,f=d.i,h=d.t,k=d.e;"string"!==typeof g&&(lt16590_.error("profileData.ids category attribute should be a string but was "+g),e=!1);"string"!==typeof f&&"core"!==g&&(lt16590_.error("profileData.ids id attribute should be a string but was "+f),e=!1);-1==["undefined","string"].indexOf(typeof h)&&(lt16590_.error("if set, profileData.ids type attribute should be a string but was "+h),e=!1);-1==["undefined","string"].indexOf(typeof k)&& (lt16590_.error("if set, profileData.ids expiry attribute should be a string but was "+k),e=!1);e&&c.push(d)});a.ga=c}else lt16590_.error("profileData.ids ("+b+") should be an array")}function lt16590_Ja(a,b,c){return(a=lt16590_Ka(a,c))&&a!==[]?a.join(void 0===b?",":b):null}function lt16590_Ka(a,b){var c=[];a.Ca?c=a.Ca:a.wa&&(c=a.wa.join(",").split(","));return"number"===typeof b&&0<b?c.slice(0,b):c}function lt16590_La(a){return(a.ga||[]).find(function(b){return"core"==b.c})} lt16590_N.prototype.O=function(){var a=lt16590_La(this);return a?a.i:null};function lt16590_Ma(a){return(a.ga||[]).find(function(b){return"did"==b.c})}lt16590_N.prototype.Ma=function(){return this.fb};lt16590_N.prototype.La=function(){return this.ab};lt16590_N.prototype.N=function(){return this.J};function lt16590_Na(a,b){return(a=(a.ga||[]).find(function(c){return b==c.t&&"sync"==c.c}))?a.i:null} function lt16590_Oa(a){var b={};return b.getProfileId=function(){return a.Aa},b.getAudienceString=function(c,d){return lt16590_Ja(a,c,d)},b.getAudiences=function(c){return lt16590_Ka(a,c)},b.getErrorCodes=function(){return a.L},b.getThirdParty=function(c){return lt16590_Na(a,c)},b.getPanoramaId=function(){return a.O()},b} lt16590_N.prototype.Fb=function(a){var b=void 0;switch(a){case 100:b="Audience extraction calls are not enabled.";break;case 101:b="Appropriate consent for audience extraction is not present.";break;case 102:b="Data collection is not enabled.";break;case 103:b="Id syncing is not enabled.";break;case 104:b="Data collection client id validation failed.";break;case 105:b="Audience extraction client id validation failed.";break;case 106:b="Linked parent id for audience extraction is invalid.";break;case 107:b= "Aborting because third party cookies are disabled and domain is not configured to use first party storage.";break;case 111:b="Aborting because no consent was present on the request or stored server-side";break;case 112:break;case 113:b="Received Error Code 113";break;case 114:b="Aborting because TCF string was expected but not present.";break;default:b="Unhandled error code "+a+" was received from the data collection call."}b&&lt16590_.error(b)}; function lt16590_Pa(a){return Array.isArray(a.L)?!!a.L.some(function(b){return-1!==[102,104,111].indexOf(b)}):!1};var lt16590_Qa=new RegExp(/^.{1,64}@.{1,255}$/),lt16590_Ra=["EMAIL","EE"]; function lt16590_O(a){a=void 0===a?{}:a;this.za=null;this.ia=!1;if(a&&lt16590_s(a)){var b=!1;a&&lt16590_s(a)?"undefined"===typeof a.id||"undefined"===typeof a.type?lt16590_.error("id object must contain both 'id' and 'type' attributes."):2<Object.keys(a).length?lt16590_.error("id object may only contain 'id' and 'type' attributes, got "+Object.keys(a).join(",")):lt16590_Ra.includes(a.type)?"EMAIL"!=a.type||lt16590_Qa.test(a.id)?b=!0:lt16590_.error("supplied id must be valid email address, was '"+ a.id+"'"):lt16590_.error("id object type must one of "+lt16590_Ra.join()+", found '"+a.type+"'"):lt16590_.error("id should be an object");b&&(this.za=a,this.ia=!0)}else lt16590_.error("idInput should be an object")}lt16590_O.prototype.B=function(){return!(this.ia&&"string"===typeof this.za)};lt16590_O.prototype.j=function(){return{did:this.za}};function lt16590_Sa(){this.bb=this.xa=void 0;this.Za=this.Ba=this.cb=!1;this.eb=!0;this.g=this.J=this.s=void 0;this.gb=!1;this.Da=this.M=this.w=void 0}function lt16590_P(a){var b=new lt16590_Sa;"boolean"!==typeof a?lt16590_.error("shouldPerformAudienceExtraction ("+a+") should be a boolean"):b.cb=a;return b}function lt16590_Q(a){var b=window.location.href,c=b.indexOf("?");-1!==c&&(b=b.substring(0,c));a.bb=b;return a}function lt16590_R(a,b){a.Za=b;return a}function lt16590_S(a,b){a.xa=b;return a} function lt16590_Ta(a,b){a.eb=b;return a}function lt16590_T(a,b){a.Ba=b;return a}function lt16590_U(a,b){a.J=b;return a}function lt16590_Ua(a,b){"undefined"!==typeof b&&(a.g=b);return a}function lt16590_Va(a,b){a.gb=b;return a}function lt16590_V(a,b){"undefined"!==typeof b&&(a.M=b);return a}function lt16590_W(a,b){"undefined"!==typeof b&&(a.w=b);return a}function lt16590_X(a,b){"undefined"!==typeof b&&(a.Da=b);return a} function lt16590_Y(a){var b=Object.assign({},a.s,lt16590_Wa(a));return Object.assign({r:{rpr:a.cb,rpx:a.eb,rid:a.Ba},m:{ref:a.bb,pv:a.Za,dcc:a.xa,co:a.gb},d:b,c:a.J},lt16590_Xa(a))}function lt16590_Wa(a){return"object"===typeof a.g?a.g.j():{}}function lt16590_Ya(a){return"object"===typeof a.g||"object"===typeof a.s&&"object"===typeof a.s.did} function lt16590_Xa(a){var b="boolean"===typeof a.w,c="string"===typeof a.M,d="string"===typeof a.Da;return b||c?{consent:{gdpr_applies:b?a.w:null,gdpr_consent:c?a.M:null}}:d?{consent:{us_privacy:d?a.Da:null}}:{}};function lt16590_Z(a,b){lt16590_K.call(this,a,b);this.M=this.w=null;this.S()}lt16590_d(lt16590_Z,lt16590_K);function lt16590__(a){var b=a.M;b||(b=a.storage.H("eupubconsent-v2"));b||(b=a.storage.H("euconsent-v2"));return b} lt16590_Z.prototype.S=function(){var a=this;if("undefined"!==typeof window.__tcfapi){var b=function(c,d){d&&c&&"tcloaded"===c.eventStatus&&(c.tcString&&"string"==typeof c.tcString&&(a.M=c.tcString),c.gdprApplies&&"boolean"==typeof c.gdprApplies&&(a.w=c.gdprApplies))};window.__tcfapi("getTCData",2,b);window.__tcfapi("addEventListener",2,b)}else this.ra<lt16590_Z.Ya&&setTimeout(function(){a.S();a.ra++},this.lb)};function lt16590_0(a,b,c){lt16590_K.call(this,a,b);this.Ob=c;this.Ea=null;(this.$a=a.a.usPrivacyEnabled)&&this.S()}lt16590_d(lt16590_0,lt16590_K);function lt16590_1(a){var b=a.Ea;!b&&a.$a&&(b=a.storage.H("usprivacy"));return b} lt16590_0.prototype.S=function(){var a=this;"undefined"!==typeof window.__uspapi?(window.__uspapi("registerDeletion",1,function(b){lt16590_.debug("Received a deletion request "+JSON.stringify(b));a.Ea="1YYY";b=a.Ob;var c=void 0===c?lt16590_A:c;var d=lt16590_U(lt16590_X(lt16590_V(lt16590_W(lt16590_Ta(lt16590_Va(lt16590_S(lt16590_T(lt16590_R(lt16590_Q(lt16590_P(!1)),!0),!1),b.f.a.bcpClient),lt16590_l(b.f)),!1),b.C.w),lt16590__(b.C)),lt16590_1(b.sa)),b.storage.N());lt16590_Za(b,d);lt16590_2(b,lt16590_Y(d), lt16590_3(b,d),"data",c)}),window.__uspapi("getUSPData",1,function(b,c){c&&b&&b.uspString&&"string"==typeof b.uspString&&(a.Ea=b.uspString)})):this.ra<lt16590_0.Ya&&setTimeout(function(){a.S();a.ra++},this.lb)};function lt16590_4(a,b,c){this.f=a||{};this.storage=b||{};this.state=c;this.C=new lt16590_Z(this.f,this.storage);this.sa=new lt16590_0(this.f,this.storage,this);this.Wb=lt16590_qa();this.T=null}function lt16590__a(a,b){b=void 0===b?lt16590_A:b;setTimeout(function(){a.state.G||lt16590_0a(a,b);lt16590_1a(a,b)},3E3)}function lt16590_1a(a,b){b=void 0===b?lt16590_A:b;setInterval(function(){a.state.G||lt16590_0a(a,b)},6E3)} function lt16590_0a(a,b){b=void 0===b?lt16590_A:b;try{a.state.G||lt16590_2a(a,lt16590_D(a.state.h),b)}catch(c){c&&lt16590_.error("The following error occurred when collecting data: "+c)}}function lt16590_3a(a){try{a.state.ha&&a.ping(lt16590_D(a.state.h))}catch(b){b&&lt16590_.error("The following error occurred when collecting data on page departure: "+b)}} lt16590_4.prototype.$=function(a,b){var c=lt16590_X(lt16590_V(lt16590_W(lt16590_Ta(lt16590_Va(lt16590_S(lt16590_T(lt16590_R(lt16590_Q(lt16590_P(lt16590_k(this.f))),!0),!0),this.f.a.bcpClient),lt16590_l(this.f)),!0),this.C.w),lt16590__(this.C)),lt16590_1(this.sa));a&&(a=a.pa(),lt16590_y(a)||(c.s=a));lt16590_U(c,this.storage.N());lt16590_Za(this,c);lt16590_2(this,lt16590_Y(c),lt16590_3(this,c),"data",b)}; function lt16590_2a(a,b,c){c=void 0===c?lt16590_A:c;b&&lt16590_s(b)&&!lt16590_y(b)&&!b.B()&&(b=lt16590_4a(a,b),lt16590_2(a,lt16590_Y(b),lt16590_3(a,b),"data",c))}function lt16590_2(a,b,c,d,e){e=void 0===e?lt16590_A:e;lt16590_z(lt16590_5a(a,void 0===d?"data":d,c),{method:"POST",data:b,ca:function(g){a.T=new lt16590_N(g,a.f);e(a.T)},error:function(g,f){lt16590_.error("Aborting due to error contacting Lotame's servers. Error reason was '"+(void 0===f?" not provided":f)+"'.")}})} lt16590_4.prototype.ping=function(a){if(a&&lt16590_s(a)&&!lt16590_y(a)&&!a.B()){var b=!1;if(window.navigator&&window.navigator.sendBeacon){b=lt16590_4a(this,a);var c=lt16590_5a(this,"data",lt16590_3(this,b));lt16590_.debug("Using navigator.sendBeacon() to send the following data on page exit",a);b=navigator.sendBeacon(c,JSON.stringify(lt16590_Y(b)))}b||(lt16590_.debug("Falling back to ajax to send the following data on page exit",a),lt16590_2a(this,a))}}; function lt16590_4a(a,b){var c=lt16590_Ta(lt16590_T(lt16590_S(lt16590_R(lt16590_Q(lt16590_P(!1)),!1),a.f.a.bcpClient),!1),!1);b=b.pa();c.s=b;c=lt16590_X(lt16590_V(lt16590_W(lt16590_U(lt16590_Va(c,lt16590_l(a.f)),a.storage.N()),a.C.w),lt16590__(a.C)),lt16590_1(a.sa));lt16590_Za(a,c);return c}lt16590_4.prototype.Ma=function(){return this.T?this.T.Ma():[]};lt16590_4.prototype.La=function(){return this.T?this.T.La():[]}; function lt16590_5a(a,b,c){return a.f.a.protocol+"://"+a.f.a[c]+"/"+a.f.a.bcpVersion+"/"+b}function lt16590_3(a,b){return a.Wb?lt16590_Ya(b)?"sensitiveFirstPartyOnlyDomain":"bcpFirstPartyOnlyDomain":lt16590_Ya(b)?"sensitiveDomain":"bcpDomain"} function lt16590_Za(a,b){if(a.f.a.enableDeclaredIds&&a.f.a.enableDeclaredIdsOnEvents&&!lt16590_Ya(b)){a:{a=a.storage;if(a=lt16590_H(a,a.f.a.declaredIdName))try{var c=Object(JSON.parse(a));break a}catch(d){lt16590_.debug("Error parsing declared ID from local storage: "+a)}c=null}c&&(c=new lt16590_O(c),c.ia&&lt16590_Ua(b,c))}};function lt16590_6a(a){this.f=a;this.Pa=!1;this.Fa=this.f.a.bcpClient;this.rb="lt_3p_"+this.Fa;this.Vb=this.f.a.iframeOrigin+"/"+this.f.a.sharedS3Path+"/lt.iframe.html?c\x3d"+this.f.a.bcpClient;a=document.createElement("iframe");a.setAttribute("id",this.rb);a.setAttribute("src",this.Vb);a.setAttribute("title","empty");a.setAttribute("tabindex","-1");a.setAttribute("role","presentation");a.setAttribute("aria-hidden","true");a.style.border="0px";a.style.width="0px";a.style.height="0px";a.style.display= "block";this.Z=a}function lt16590_7a(a,b){document.getElementById(a.rb)?lt16590_8a(b)&&b():(a.Z.onload=function(){a.Pa=!0;lt16590_8a(b)&&b()},"loading"===document.readyState?window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(a.Z)}):document.body.appendChild(a.Z))}lt16590_6a.prototype.getTime=function(){return(new Date).getTime()};function lt16590_8a(a){return!!(a&&a.constructor&&a.call&&a.apply)};function lt16590_9a(a){this.vb=a[0]||"";this.type="r"===a[1]?"referrer":"element";this.Ab=a[2];this.Ta=a[4]||null}function lt16590_5(a){return"referrer"===a.type};function lt16590_6(){this.U=/([a-zA-Z]+)?\{\{([^}}]*)\}\}(\.([a-zA-Z0-9\._-]+))?/g}lt16590_6.prototype.reset=function(){this.U.lastIndex=0};lt16590_6.prototype.exec=function(a){return this.U.exec(a)};lt16590_6.prototype.test=function(a){this.U.lastIndex=0;return this.U.test(a)};lt16590_6.prototype.replace=function(a){this.U.lastIndex=0;return a.replace(this.U,"")};var lt16590_7=new lt16590_6; function lt16590_$a(a){a=void 0===a?{}:a;this.id=a.id;this.location=a.location;this.element=a.element;this.event=a.event;this.Ib=a.behaviorType;this.zb=a.ruleBuilderKey;this.da=a.template;a:{try{if(this.element){var b=lt16590_7.test(this.element)?this.element:"{{#"+this.element+"}}";lt16590_7.reset();var c=lt16590_7.exec(b);var d=c?new lt16590_9a(c):null;break a}}catch(g){throw Error('Element "'+this.element+'" is invalid');}d=null}this.Ka=d;a=[];try{var e;for(lt16590_7.reset();null!==(e=lt16590_7.exec(this.da));)a.push(new lt16590_9a(e))}catch(g){throw Error('Template "'+ this.da+'" is invalid');}this.Db=a}function lt16590_ab(a,b){var c=null;try{c=(new RegExp(a.location)).exec(b)}catch(d){lt16590_.error("Rule ["+a.id+"] "+("location is an invalid expression: "+a.location))}return c};function lt16590_bb(){this.sb=this.Ra=null;this.na=[]}function lt16590_cb(a){var b=new lt16590_bb;b.Ra=a;return b}function lt16590_db(a,b){a.sb=b;return a}function lt16590_eb(a,b){a.na=b;return a};function lt16590_fb(){this.aa=[]}lt16590_fb.prototype.add=function(a){this.aa.push(a)};function lt16590_gb(a){var b=[];a.aa.forEach(function(c){(c=c.sb)&&0<c.length&&Array.prototype.forEach.call(c,function(d){d.nodeType&&d.nodeType==Node.ELEMENT_NODE&&b.push(d)})});return b};function lt16590_hb(a,b){this.location=a;this.document=b}function lt16590_ib(a,b){var c=null;b.element?0<lt16590_8(a,[b.Ka]).aa.length&&(c=lt16590_jb(a,b)):c=lt16590_jb(a,b);return c} function lt16590_8(a,b){var c=new lt16590_fb;try{b.forEach(function(d){if(lt16590_5(d)){var e=null,g=lt16590_5(d)?parseInt(d.Ta,10)||0:0,f=(new RegExp(d.Ab)).exec(a.document.referrer);null!==f&&"undefined"!==typeof f[g]&&(e=lt16590_kb(f[g]),e=lt16590_eb(lt16590_cb(d.vb),[e]));d=e}else d=lt16590_lb(a,d);d&&c.add(d)})}catch(d){lt16590_.debug("Error, rule contains bad selector: "+d)}return c} function lt16590_lb(a,b){var c=null,d=(lt16590_5(b)?null:b.Ta)||"value";a=lt16590_mb(a,b.Ab);var e=[];a&&0<a.length&&(Array.prototype.forEach.call(a,function(g){for(var f=d.split("."),h=0;g&&h<f.length;)g=g[f[h]],h++;g&&h===f.length&&e.push(lt16590_kb(g.toString()))}),lt16590_5(b)||!b.Ta||0<e.length)&&(c=lt16590_eb(lt16590_db(lt16590_cb(b.vb),a),e));return c} function lt16590_mb(a,b){var c=null;if(b)try{c=a.document.querySelectorAll(b)}catch(d){lt16590_.debug("Error querying selector: "+b)}return c}function lt16590_kb(a){a=a.replace(/<\/?[^>]+\/?>/gi,"").replace(/\n|\t|\r/gi," ").replace(/\s{2,}/g," ").replace(/\[quote\][\s\S]*\[\/quote\]/gi,"");try{a=decodeURIComponent(a)}catch(b){}return a}function lt16590_jb(a,b){return b.zb?lt16590_nb(a,b):lt16590_ob(a,b)} function lt16590_ob(a,b){var c=null,d=b.da;lt16590_8(a,b.Db||[]).aa.forEach(function(g){d=d.replace(g.Ra,(0<g.na.length?g.na.join(","):null)||"")});if((a=lt16590_ab(b,a.location))&&0<a.length)for(var e=0;e<a.length;e++)d=d.replace(new RegExp("\\$"+e.toString()+"\\b"),a[e]);if(d=lt16590_7.replace(d)){c={behaviors:{}};try{d=decodeURI(d)}catch(g){}c.behaviors[b.Ib]=["#OpR#"+b.id+"#"+d];c=new lt16590_r(c)}return c} function lt16590_nb(a,b){var c=[],d=lt16590_ab(b,a.location),e=[];if(d&&0<d.length)for(var g=0;g<d.length;g++)e.push(new RegExp("\\$"+g.toString()+"\\b"));var f=lt16590_8(a,b.Db||[]).aa;0<f.length?(g=f.map(function(h){return h.na}),lt16590_pb(a,g).forEach(function(h){for(var k=String(b.da),l=0;l<f.length;l++)k=k.replace(f[l].Ra,h[l]);(k=lt16590_qb(k,e,d))&&c.push(k)})):(a=String(b.da),(a=lt16590_qb(a,e,d))&&c.push(a));a=null;0<c.length&&(a={ruleBuilder:{}},a.ruleBuilder[b.zb]=c,a=new lt16590_r(a)); return a}function lt16590_qb(a,b,c){for(var d=0;d<b.length;d++)a=a.replace(b[d],c[d]);return lt16590_7.replace(a)}function lt16590_pb(a,b){var c=[],d=b.length;if(1==d)c=b[0].map(function(g){return[g]});else if(1<d){d=b[0];var e=lt16590_pb(a,b.slice(1));d.forEach(function(g){for(var f=JSON.parse(JSON.stringify(e)),h=0;h<f.length;h++)f[h].unshift(g),c.push(f[h])})}return c};function lt16590_rb(){this.Ua=new lt16590_C}lt16590_rb.prototype.add=function(a){a&&this.Ua.enqueue(a.j())};function lt16590_sb(a){return a.Ua.B()?null:lt16590_D(a.Ua).j()};function lt16590_tb(a){this.Cb=a;this.cache=[]}function lt16590_ub(a,b,c,d){c.forEach(function(e){var g=b.event,f=a.cache.find(function(h){return e===h.element});f?(f=f.handlers,g in f||(f[g]={},f[g].callbacks=[]),f[g].callbacks.push(lt16590_vb(a,b,e,d))):(f={},f[g]={},f[g].callbacks=[lt16590_vb(a,b,e,d)],a.cache.push({element:e,handlers:f}))})} function lt16590_vb(a,b,c,d){return function(e){c===d.document&&b.element?lt16590_gb(lt16590_8(d,[b.Ka])).find(function(g){return e.target&&e.target==g||e.srcElement&&e.srcElement==g})&&a.Cb.add(lt16590_ib(d,b)):a.Cb.add(lt16590_ib(d,b))}};function lt16590_wb(a,b,c){this.f=a;this.wb=[];this.xb=!1;this.pb=lt16590_xb(this,this.f.a.firstImpressionRules);this.Xb=b;this.Xa=new lt16590_rb;this.qa=new lt16590_tb(this.Xa);this.Ub="function"===typeof c;this.Yb=c}function lt16590_yb(a){lt16590_.debug("Running Optimus Page Load Rules.");a.xb?lt16590_zb(a):(lt16590_Ab(a),a.xb=!0)}function lt16590_Bb(a){lt16590_.debug("Running Optimus First Impression Rules.");0<a.pb.length&&(lt16590_Cb(a,a.pb),lt16590_Db(a,"firstImpression"))} function lt16590_Ab(a){lt16590_z(a.f.a.protocol+"://"+a.f.a.tagsDomain+"/lt/c/"+a.f.a.bcpClient+"/optimus_rules.json",{ca:function(b){a.wb=lt16590_xb(a,b);lt16590_zb(a)},error:function(b,c){lt16590_.error("Failed loading Optimus rules:  "+c)}},!1)}function lt16590_xb(a,b){var c=[];b&&Array.isArray(b)&&0<b.length&&b.forEach(function(d){try{c.push(new lt16590_$a(d))}catch(e){lt16590_.error(e)}},a);return c}function lt16590_Eb(){var a=window,b={};b[a.location.href]=a.document;return b} function lt16590_zb(a){lt16590_Fb(a);lt16590_Cb(a,a.wb);lt16590_Gb(a);lt16590_Db(a,"fullRun")}function lt16590_Cb(a,b){var c=lt16590_Eb(),d={},e;for(e in c)d.fa=c[e],d.V=new lt16590_hb(e,d.fa),b.forEach(function(g){return function(f){if((new RegExp(f.location)).test(e))if(f.element&&f.event){var h=lt16590_gb(lt16590_8(g.V,[f.Ka]));0>=h.length&&"click"===f.event&&h.push(g.fa);lt16590_ub(a.qa,f,h,g.V)}else a.Xa.add(lt16590_ib(g.V,f))}}(d)),d={V:d.V,fa:d.fa}} function lt16590_Gb(a){a.qa.cache.forEach(function(b){var c=b.element;b=b.handlers;var d={},e;for(e in b)d.ta=b[e].callbacks,b[e].listener=function(g){return function(f){return lt16590_Hb(a,f,c,g.ta)}}(d),lt16590_w(c,e,b[e].listener),lt16590_.debug("Adding "+e+" event handler to "+(c.outerHTML||"document")),d={ta:d.ta}})}function lt16590_Fb(a){a.qa.cache.forEach(function(b){var c=b.element;b=b.handlers;for(var d in b)lt16590_x(c,d,b[d].listener)});a.qa.cache=[]} function lt16590_Hb(a,b,c,d){d.forEach(function(e){return e.call(c,b)});lt16590_Db(a,"event")}function lt16590_Db(a,b){b=void 0===b?"fullRun":b;var c=lt16590_sb(a.Xa);c&&a.Xb.enqueue(c);a.Ub&&"fullRun"===b&&a.Yb.apply(a,[])};function lt16590_Ib(a){this.state=a} function lt16590_Jb(a){if(window.pbjs&&"object"===typeof window.pbjs){var b=[],c="bidder adId mediaType cpm dealId currency creativeId adUnitCode".split(" "),d=new lt16590_rb;"function"===typeof window.pbjs.getAllPrebidWinningBids&&(b=b.concat(window.pbjs.getAllPrebidWinningBids()));"function"===typeof window.pbjs.getAllWinningBids&&(b=b.concat(window.pbjs.getAllWinningBids()));b.forEach(function(e){if("object"===typeof e&&"string"===typeof e.bidder){var g={};c.forEach(function(f){var h=e[f],k=typeof h; "number"===k?h=String(h).trim():"string"!==k&&(h="");""!==h&&(g["prebid_"+f]=[h])});d.add(new lt16590_r({ruleBuilder:g}))}});(b=lt16590_sb(d))&&a.state.h.enqueue(b)}};function lt16590_Kb(a,b,c){(this.Y=a.a.googleCampaignEvents)&&0<this.Y.length&&(this.state=b,this.A=c,this.X=null,this.yb=this.Y.includes("render"),this.fc=this.Y.includes("view"),this.Ga=this.Y.includes("click"),this.ub={},this.tb={},window.googletag=window.googletag||{cmd:[]},lt16590_Lb(this),lt16590_Mb(this),this.fc&&lt16590_Nb(this),this.Ga&&lt16590_Ob(this))} function lt16590_9(a,b,c){var d={};b&&(b=b.getResponseInformation())&&(b.advertiserId&&(d[c+"AdvertiserId"]=[String(b.advertiserId)]),b.campaignId&&(d[c+"CampaignId"]=[String(b.campaignId)]),b.creativeId&&(d[c+"CreativeId"]=[String(b.creativeId)]),a.state.h.enqueue((new lt16590_r({ruleBuilder:d})).j()))} function lt16590_Lb(a){try{window.googletag.cmd.push(function(){try{window.googletag.pubads&&window.googletag.pubads.getSlots&&window.googletag.pubads().getSlots().forEach(function(b){b.getResponseInformation()&&(lt16590_$("Previously Rendered Slot",b),a.yb&&lt16590_9(a,b,"render"),a.Ga&&lt16590_Pb(a,b))})}catch(b){}})}catch(b){lt16590_.error("Error checking for previously rendered ads")}} function lt16590_Mb(a){try{window.googletag.cmd.push(function(){try{window.googletag.pubads&&window.googletag.pubads().addEventListener("slotRenderEnded",function(b){lt16590_$("Newly Rendered Slot",b.slot);a.yb&&lt16590_9(a,b.slot,"render");a.Ga&&lt16590_Pb(a,b.slot)})}catch(b){}})}catch(b){lt16590_.error("Error setting up listeners for newly rendered ads")}} function lt16590_Nb(a){try{window.googletag.cmd.push(function(){try{window.googletag.pubads&&window.googletag.pubads().addEventListener("impressionViewable",function(b){lt16590_$("Viewed Slot",b.slot);lt16590_9(a,b.slot,"view")})}catch(b){}})}catch(b){lt16590_.error("Error setting up listeners for viewed ads")}}function lt16590_Ob(a){window.addEventListener("blur",function(){null!=a.X&&(lt16590_$("Click Slot",a.X),lt16590_9(a,a.X,"click"),lt16590_3a(a.A))})} function lt16590_Pb(a,b){try{var c=b.getSlotElementId(),d=document.getElementById(c);if(d){var e=a.ub[c];e&&lt16590_x(d,"mouseover",e);var g=a.tb[c];g&&lt16590_x(d,"mouseout",g);e=function(){lt16590_$("Mouseover Slot",b);a.X=b};lt16590_w(d,"mouseover",e);a.ub[c]=e;e=function(){lt16590_$("Mouseout Slot",b);a.X=null};lt16590_w(d,"mouseout",e);a.tb[c]=e}}catch(f){lt16590_.error(f)}}function lt16590_$(a,b){if(lt16590_.Ja&&b){var c=b.getSlotId().getId();lt16590_.debug(a+" - "+c+" : ",b)}};function lt16590_Qb(a,b){this.enabled=!0===a.a.googleEspEnabled&&!0===a.a.panoramaIdEnabled&&!0;this.storage=b;lt16590_.Ja&&lt16590_.debug("Google Esp Module Enabled: "+this.enabled);!0===this.enabled&&(window.googletag=window.googletag||{cmd:[]},window.googletag.encryptedSignalProviders=window.googletag.encryptedSignalProviders||[],(a=this.storage.O())&&lt16590_Rb(this,a))} function lt16590_Rb(a,b){b=b||"";a.enabled&&window.googletag.encryptedSignalProviders.push({id:"crwdcntrl.net",collectorFunction:function(){lt16590_.debug("panoramaId provided to googleEsp: "+b);return Promise.resolve(b)}})};function lt16590_Sb(a,b){this.f=a;this.storage=b}function lt16590_Tb(a,b){var c=b.N();c&&lt16590_ua(a.storage,c);var d=b.O();c=a.f.a.panoramaIdName;var e;if(e=(e=lt16590_La(b))?e.e:null){var g=parseInt(e,10);lt16590_ta(a.storage,c+"_expiry",e,g);"string"===typeof d&&d?lt16590_ta(a.storage,c,d,g):(d=a.storage,d.I(c,"",0),lt16590_J(d,c))}lt16590_Ub(a,b)} function lt16590_Ub(a,b){a.f.a.enableDeclaredIds&&a.f.a.enableDeclaredIdsOnEvents&&(b=lt16590_Ma(b))&&(b.i?(a=a.storage,lt16590_I(a,a.f.a.declaredIdName,JSON.stringify({id:b.i,type:b.t}))):(a=a.storage,lt16590_J(a,a.f.a.declaredIdName)))}function lt16590_Vb(a,b){if("function"===typeof a.f.a.onProfileReady)try{(0,a.f.a.onProfileReady)(lt16590_Oa(b))}catch(c){c&&lt16590_.error("The following error occurred in the onProfileReady callback: "+c)}} function lt16590_Wb(a){var b=a.f.a.namespace;Array.isArray(b.cmd)?b.cmd.forEach(function(c){if("function"===typeof c)try{c.apply(a)}catch(d){d&&lt16590_.error("The following error occurred when executing queued commands: "+d)}}):b.cmd=[];b.cmd.push=function(c){if("function"===typeof c)try{c.apply(a)}catch(d){d&&lt16590_.error("The following error occurred when executing a command: "+d)}}};function lt16590_Xb(){var a=this;this.f=new lt16590_ja;this.state=new lt16590_sa(!lt16590_k(this.f));this.Oa=new lt16590_6a(this.f);this.storage=new lt16590_E(this.f);this.A=new lt16590_4(this.f,this.storage,this.state);this.mb=new lt16590_ya(this.f,this.storage);this.Zb=new lt16590_Ib(this.state);new lt16590_Kb(this.f,this.state,this.A);this.Tb=new lt16590_Qb(this.f,this.storage);this.Qa=new lt16590_wb(this.f,this.state.h,function(){a.state.K&&a.$()});this.oa=new lt16590_Sb(this.f,this.storage); lt16590_w(window,"message",function(b){if(a.f.a.iframeOrigin===b.origin&&b.data.action=="ltjs:"+a.f.a.bcpClient+":publishLotameEnvironment"){b=b.data.value;a.state.ya=b;if("thirdParty"===b){b=a.Oa;var c=a.A;c={ec:c.Ma(),Rb:c.La(),Lb:{tcString:lt16590__(c.C),gdprApplies:c.C.w}};c=void 0===c?{}:c;if(b.Pa){var d=c.Lb||{};d.syncPixels=c.ec;d.exportBeacons=c.Rb;d.clientId=b.f.a.bcpClient;d.bcpPrefix=b.f.a.bcpPrefix;b.Z.contentWindow.postMessage({action:"ltjs:"+b.Fa+":requestDeployPixelContent",params:d}, b.f.a.iframeOrigin)}}a.state.K||lt16590_Yb(a);a.state.ka=!1;a.state.G&&lt16590_Zb(a)}});lt16590_w(window,"visibilitychange",function(){"hidden"===document.visibilityState&&lt16590_3a(a.A)});lt16590_w(window,"pagehide",function(){lt16590_3a(a.A)});lt16590_w(window,"load",function(){a.state.ja=!0;!0===a.f.a.autoRun&&lt16590_Yb(a)});"complete"===document.readyState&&(this.state.ja=!0);lt16590__b(this);lt16590_Wb(this.oa);if("function"===typeof this.f.a.onTagReady)try{(0,this.f.a.onTagReady)(this.f.a.namespace)}catch(b){b&& lt16590_.error("The following error occurred in the onTagReady callback: "+b)}!0===this.f.a.autoRun&&lt16590_Zb(this)}function lt16590_Zb(a,b){b=void 0===b?{}:b;a.state.ka?(a.state.G=!0,a.state.h.enqueue(b)):a.state.K?(a.state.h.enqueue(b),lt16590_Yb(a)):a.$(b)} lt16590_Xb.prototype.$=function(a){var b=this;a=void 0===a?{}:a;this.state.ka=!0;this.state.G=!1;this.state.h.enqueue(this.f.a.namespace.data||{});lt16590_Bb(this.Qa);var c=lt16590_D(this.state.h);lt16590_s(a)&&!lt16590_y(a)&&(a=new lt16590_r(a),c=c?lt16590_pa(c,a):a);lt16590_.debug("Recording a page view.");this.A.$(c,function(d){return lt16590_0b(b,d)})}; function lt16590__b(a){var b=a.f.a.namespace;b.getAudiences=function(c){var d=a.storage,e=[],g=d.f.a.audienceLocalStorage;if(g)try{var f=lt16590_H(d,g);f&&(e=f.split(","),"number"===typeof c&&0<c&&(e=e.slice(0,c)))}catch(h){lt16590_.error("The following error occurred while trying to get audiences: "+h)}else lt16590_.error("The audienceLocalStorage configuration must be enabled to get audiences.");return e};b.getProfileId=function(){return lt16590_F(a.storage)};b.getPanoramaId=function(){return a.storage.O()}; b.page=function(c){return lt16590_Zb(a,c)};b.collect=function(c){return a.state.h.enqueue(c)};b.setIdentity=function(c){if(a.f.a.enableDeclaredIdsOnEvents){var d=a.A;if(d.f.a.enableDeclaredIds&&d.f.a.enableDeclaredIdsOnEvents){var e=!1;if(lt16590_s(c)){var g=new lt16590_r({declaredId:c});lt16590_v(g)&&(e=!0,d.state.h.enqueue(g.j()))}e||lt16590_.error("Call to identify must include a properly formatted ID object.")}else lt16590_.error("Client "+d.f.a.bcpClient+" is not enabled to declare identifiers on all events. Please contact a Lotame representative.")}else if(d= a.A,e=void 0===e?lt16590_A:e,d.f.a.enableDeclaredIds){g=!1;if(lt16590_s(c)&&(c=new lt16590_O(c),g=c.ia)){c=lt16590_Ua(lt16590_X(lt16590_V(lt16590_W(lt16590_U(lt16590_R(lt16590_T(lt16590_S(new lt16590_Sa,d.f.a.bcpClient),!1),!1),d.storage.N()),d.C.w),lt16590__(d.C)),lt16590_1(d.sa)),c);var f=lt16590_2;var h=Object.assign({},c.s,lt16590_Wa(c));h=Object.assign({r:{rid:c.Ba},m:{dcc:c.xa},d:h,c:c.J},lt16590_Xa(c));f(d,h,lt16590_3(d,c),"map",e)}g||lt16590_.error("Call to identify must include a properly formatted ID object.")}else lt16590_.error("Client "+ d.f.a.bcpClient+" is not enabled to declare identifiers. Please contact a Lotame representative.")};b.sync=function(){return lt16590_.error("sync() is not supported. Either switch to using sync.js or use the collect() method")};b.getConsent=function(c,d){return lt16590_za(a.mb,c,d)};b.setConsent=function(c,d,e){return lt16590_Da(a.mb,c,d,e)};b.getInternalState=function(){return a.state.j()};b.getInternalConfigs=function(){return a.f.j()}} function lt16590_0b(a,b){lt16590_Tb(a.oa,b);var c=a.f.a.audienceLocalStorage;lt16590_k(a.f)&&!1!==c&&(lt16590_l(a.f)?lt16590_J(a.storage,c):lt16590_I(a.storage,c,lt16590_Ja(b,",")));lt16590_Vb(a.oa,b);lt16590_Pa(b)?lt16590_.error("Aborting due to above errors."):Array.isArray(b.L)&&b.L.includes(107)?lt16590_.debug("Cookie test failed."):(lt16590_Rb(a.Tb,a.storage.O()),lt16590_7a(a.Oa,function(){var d=a.Oa;d.Pa&&d.Z.contentWindow.postMessage({action:"ltjs:"+d.Fa+":requestLotameEnvironment",key:d.f.a.profileIdCookieName}, d.f.a.iframeOrigin)}),b.Aa&&!a.state.ha&&(a.state.ha=!0,lt16590__a(a.A,function(d){lt16590_Ub(a.oa,d)})))}function lt16590_Yb(a){if(a.state.ja){if(a.f.a.hasPageLoadOptimusRules)switch(a.state.ya){case "thirdParty":case "firstParty":lt16590_yb(a.Qa);break;default:a.state.K&&lt16590_yb(a.Qa)}a.f.a.collectPrebidData&&lt16590_Jb(a.Zb);a.state.K&&!a.f.a.hasPageLoadOptimusRules&&a.$()}};lt16590_.name="LT.JS";try{new lt16590_Xb}catch(a){lt16590_.error(a)};} 